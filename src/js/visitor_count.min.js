import{initializeApp as t}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import{getAnalytics as e}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";let firebaseConfig={apiKey:"AIzaSyA7k8e5fi58TVfAfXK4Xg5mdB8o3k8l6Cw",authDomain:"personal-website-view-counter.firebaseapp.com",databaseURL:"https://personal-website-view-counter-default-rtdb.firebaseio.com",projectId:"personal-website-view-counter",storageBucket:"personal-website-view-counter.appspot.com",messagingSenderId:"1013946837948",appId:"1:1013946837948:web:1c5b360b79b13a08e3d9b9",measurementId:"G-CM6S38F6KB"},app=t(firebaseConfig),analytics=e(app);import{getDatabase as o,set as i,get as r,update as a,remove as s,ref as n,child as c,onValue as m}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";let db=o(),dbName="Page_Views",APIURL="https://api.ipify.org?format=json",timeNow=new Date,options={day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"},timeNowStr=timeNow.toLocaleString("en-GB",options);function callAPI(){fetch("https://api.ipify.org?format=json").then(t=>{if(!t.ok)throw Error("Network response was not ok");return t.json()}).then(t=>{getLocation(),getViewerIP(t)}).catch(t=>{console.error(t)})}function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition,showError):localStorage.setItem("Loc_Stat","Geolocation is not supported by this browser")}function showPosition(t){localStorage.setItem("Lat_Long","["+t.coords.latitude+"; "+t.coords.longitude+"]"),localStorage.setItem("Loc_Stat","Location captured successfully")}function showError(t){switch(localStorage.setItem("Lat_Long","[-1; -1]"),t.code){case t.PERMISSION_DENIED:localStorage.setItem("Loc_Stat","User denied the request for Geolocation");break;case t.POSITION_UNAVAILABLE:localStorage.setItem("Loc_Stat","Location information is unavailable");break;case t.TIMEOUT:localStorage.setItem("Loc_Stat","The request to get user location timed out");break;case t.UNKNOWN_ERROR:localStorage.setItem("Loc_Stat","An unknown error occurred")}}function getViewerIP(t){var e=t.ip,o=convViewerIPStr(e);writeViewerIP(e,o),countVisits()}function convViewerIPStr(t){for(var e,o=t.toString(),i=timeNowStr,e=0;e<o.length;e++)o=o.replace(".","-");return o+"_"+(i=(i=(i=i.substr(21,i.length)).replace(" ","")).replace(":","_"))}function writeViewerIP(t,e){i(n(db,dbName+"/"+e),{IP_Addr:t,Lat_Long:localStorage.getItem("Lat_Long"),Loc_Stat:localStorage.getItem("Loc_Stat"),Time_Stamp:timeNowStr})}function countVisits(){var t;m(n(db,dbName),e=>{t=Object.keys(e.val()).length,document.getElementById("visitor-count").innerHTML=t})}callAPI();
